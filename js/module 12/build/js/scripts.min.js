"use strict";document.addEventListener("DOMContentLoaded",function(){var t,n=((t={}).form=document.querySelector(".url-editor"),t.urlEditorText=t.form.querySelector(".url-editor__text"),t.addBtn=t.form.querySelector(".url-editor__button"),t.urlList=document.querySelector(".url-list"),t.rmBtn=t.urlList.querySelector(".url-item__button"),t.source=document.querySelector("#card").innerHTML.trim(),t),a=[{url:"https://www.google.com.ua/",img:"http://www.google.com.ua/images/branding/googlelogo/1x/googlelogo_white_background_color_272x92dp.png"},{url:"https://rozetka.com.ua/",img:"https://i.rozetka.ua/favicons/apple-touch-icon-114x114.png"},{url:"https://www.windytv.com/",img:"https://www.windy.com/img/socialshare3.jpg"},{url:"https://stackoverflow.com/",img:"https://cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon@2.png?v=73d79a89bded"},{url:"https://www.npmjs.com/",img:"https://static.npmjs.com/338e4905a2684ca96e08c7780fc68412.png"}];0===localStorage.length&&a.forEach(function(t){var e=JSON.stringify(t);localStorage.setItem("".concat(t.url),e)});var e=function(){for(var t=[],e=0,r=localStorage.length;e<r;++e){var o=localStorage.key(e),n=JSON.parse(localStorage.getItem(o)),a={url:o,img:n.img};t.push(a)}return t}(),i=Handlebars.compile(n.source),c=e.reduce(function(t,e){return t+i(e)},"");n.urlList.insertAdjacentHTML("afterbegin",c),n.addBtn.addEventListener("click",function(t){t.preventDefault();var o=n.urlEditorText.value.trim(),e={baseUrl:"http://api.linkpreview.net/?key=5b9d4f1dbbabd453cad7c1485fc1be3731762b7f6c0b9&q=".concat(o),getInfo:function(){var e=this;return fetch(this.baseUrl).then(function(t){if(t.ok)return t.json();throw console.log(e.baseUrl),new Error("Error while fetching "+t.statusText)}).then().catch(function(t){return console.log(t)})}};if(!/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/.test(o))return void alert("Url-адрес не валидный");if(void 0!==a.find(function(t){return t.url===o}))return void alert("Такая закладка уже есть!!!");e.getInfo().then(function(t){var e={url:o,img:t.image};a.push(e);var r=JSON.stringify(e);localStorage.setItem("".concat(o),r),c=i(e),n.urlList.insertAdjacentHTML("afterbegin",c)}),n.form.reset()}),n.urlList.addEventListener("click",function(t){t.preventDefault();var e=t.target;if("BUTTON"===e.tagName){var r=e.previousSibling.textContent;localStorage.removeItem(r),e.parentNode.remove()}})});